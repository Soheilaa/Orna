<div class="product-detail-container">
  <!-- Left Section: Images -->
  <div class="product-image-section">
    <button class="btn-back" (click)="goBack()">Previous Page</button>
    <div class="product-image-grid">
      <img
        *ngIf="product?.image"
        [src]="product?.image"
        [alt]="product?.name"
        class="product-detail-image"
      />
      <!-- <img
        *ngIf="product?.image"
        [src]="product?.image"
        [alt]="product?.name"
        class="product-detail-image"
      /> -->
    </div>
  </div>

  <!-- Right Section: Product Details -->
  <div class="product-detail-info">
    <h2>{{ product?.name }}</h2>
    <p class="product-price">{{ product?.price | currency }}</p>

    <div *ngIf="product">
      <h4 class="product-metal">{{ product.metal || 'No metal information available' }}</h4>
    </div>

    <div class="size-selection" *ngIf="product?.size?.length">
      <label for="size">Select Size:</label>
      <div class="sizes">
        <span
          *ngFor="let size of product?.size"
          (click)="selectSize(size)"
          [class.selected]="size === selectedSize"
        >
          {{ size }}
        </span>
      </div>
    </div>

    <div class="expandable-section">
      <div class="section-header" (click)="toggleSection('info')">
        <h3>Product Information</h3>
        <mat-icon>{{ isInfoOpen ? 'remove' : 'add' }}</mat-icon>
      </div>
      <div *ngIf="isInfoOpen" class="section-content">
        <p>{{ product?.description }}</p>
      </div>
    </div>

    <div class="expandable-section">
      <div class="section-header" (click)="toggleSection('shipping')">
        <h3>Shipping & Returns</h3>
        <mat-icon>{{ isShippingOpen ? 'remove' : 'add' }}</mat-icon>
      </div>
      <div *ngIf="isShippingOpen" class="section-content">
        <p>
          <mat-icon>directions_car</mat-icon> Delivery 
          <ul>
            <li> Free shipping on orders over SEK 499</li>
            <li> Standard delivery: 3-5 working days</li>
            <li> Express delivery: 1-3 working days</li>
          </ul>
          <mat-icon>swap_horiz</mat-icon> Extended returns
          <ul>
            <li>All orders placed after 11/11/2024 can be returned or exchanged free of charge until 12/01/2025.</li>
          </ul>
      </div>

    </div>

    <hr /> 
    
    <button class="btn-add-to-cart" (click)="addToCart(product)">
      Add to Cart
    </button>
    <button class="btn-wishlist" (click)="toggleFavorite(product)">
      <mat-icon>{{ product?.isFavorite ? 'favorite' : 'favorite_border' }}</mat-icon>
      Save to Wishlist
    </button>
  </div>
</div>
